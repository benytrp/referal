<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline Template Builder</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr;
            min-height: 80vh;
        }

        .sidebar {
            background: #f8f9fa;
            padding: 30px 20px;
            border-right: 1px solid #e9ecef;
        }

        .template-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-weight: 600;
            color: #495057;
            margin-bottom: 10px;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .template-btn {
            width: 100%;
            padding: 12px 15px;
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            text-align: left;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .template-btn:hover, .template-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
            transform: translateX(5px);
        }

        .content-area {
            padding: 30px;
            overflow-y: auto;
        }

        .builder-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 6px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        .dynamic-fields {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }

        .field-item {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
            align-items: center;
        }

        .field-item input {
            flex: 1;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        .preview-section {
            border: 2px solid #e9ecef;
            border-radius: 8px;
            margin: 20px 0;
        }

        .preview-header {
            background: #f8f9fa;
            padding: 15px;
            border-bottom: 1px solid #e9ecef;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .preview-content {
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
            background: white;
        }

        .export-section {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .export-option {
            text-align: center;
            padding: 20px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #e9ecef;
        }

        .export-option:hover {
            background: #667eea;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .export-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .code-preview {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }

        .template-hidden {
            display: none;
        }

        .field-type-selector {
            width: 120px;
        }

        .validation-message {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }

        .validation-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .validation-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .advanced-options {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                border-right: none;
                border-bottom: 1px solid #e9ecef;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîß Offline Template Builder</h1>
            <p>Create professional templates that work completely offline - no dependencies required</p>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <div class="template-category">
                    <div class="category-title">üìù Forms & Data</div>
                    <button class="template-btn active" data-template="contact-form">
                        üìã Contact Form
                    </button>
                    <button class="template-btn" data-template="survey">
                        üìä Survey Template
                    </button>
                    <button class="template-btn" data-template="evaluation">
                        ‚≠ê Evaluation Form
                    </button>
                    <button class="template-btn" data-template="registration">
                        üé´ Registration Form
                    </button>
                </div>

                <div class="template-category">
                    <div class="category-title">üìÑ Documents</div>
                    <button class="template-btn" data-template="invoice">
                        üí∞ Invoice Template
                    </button>
                    <button class="template-btn" data-template="report">
                        üìà Report Template
                    </button>
                    <button class="template-btn" data-template="resume">
                        üë§ Resume Template
                    </button>
                    <button class="template-btn" data-template="proposal">
                        üéØ Project Proposal
                    </button>
                </div>

                <div class="template-category">
                    <div class="category-title">üåê Web Pages</div>
                    <button class="template-btn" data-template="landing">
                        üöÄ Landing Page
                    </button>
                    <button class="template-btn" data-template="portfolio">
                        üé® Portfolio Page
                    </button>
                    <button class="template-btn" data-template="blog">
                        ‚úçÔ∏è Blog Template
                    </button>
                </div>

                <div class="template-category">
                    <div class="category-title">üîß Custom</div>
                    <button class="template-btn" data-template="custom">
                        ‚ö° Custom Template
                    </button>
                </div>
            </div>

            <div class="content-area">
                <!-- Contact Form Template -->
                <div id="contact-form" class="template-builder">
                    <div class="builder-section">
                        <h2 class="section-title">üìã Contact Form Builder</h2>
                        
                        <div class="form-group">
                            <label>Form Title</label>
                            <input type="text" id="cf-title" value="Contact Us" placeholder="Enter form title">
                        </div>

                        <div class="form-group">
                            <label>Description</label>
                            <textarea id="cf-description" placeholder="Form description or instructions">Get in touch with us using the form below.</textarea>
                        </div>

                        <div class="form-group">
                            <label>Form Action URL</label>
                            <input type="text" id="cf-action" placeholder="https://example.com/submit" value="">
                        </div>

                        <div class="form-group">
                            <label>Form Fields</label>
                            <div class="dynamic-fields" id="cf-fields">
                                <div class="field-item">
                                    <input type="text" placeholder="Field Label" value="Full Name">
                                    <select class="field-type-selector">
                                        <option value="text">Text</option>
                                        <option value="email">Email</option>
                                        <option value="tel">Phone</option>
                                        <option value="textarea">Textarea</option>
                                        <option value="select">Dropdown</option>
                                        <option value="checkbox">Checkbox</option>
                                        <option value="radio">Radio</option>
                                    </select>
                                    <input type="text" placeholder="Field Name" value="fullname">
                                    <button class="btn btn-danger btn-small" onclick="removeField(this)">Remove</button>
                                </div>
                                <div class="field-item">
                                    <input type="text" placeholder="Field Label" value="Email Address">
                                    <select class="field-type-selector">
                                        <option value="text">Text</option>
                                        <option value="email" selected>Email</option>
                                        <option value="tel">Phone</option>
                                        <option value="textarea">Textarea</option>
                                        <option value="select">Dropdown</option>
                                        <option value="checkbox">Checkbox</option>
                                        <option value="radio">Radio</option>
                                    </select>
                                    <input type="text" placeholder="Field Name" value="email">
                                    <button class="btn btn-danger btn-small" onclick="removeField(this)">Remove</button>
                                </div>
                                <div class="field-item">
                                    <input type="text" placeholder="Field Label" value="Message">
                                    <select class="field-type-selector">
                                        <option value="text">Text</option>
                                        <option value="email">Email</option>
                                        <option value="tel">Phone</option>
                                        <option value="textarea" selected>Textarea</option>
                                        <option value="select">Dropdown</option>
                                        <option value="checkbox">Checkbox</option>
                                        <option value="radio">Radio</option>
                                    </select>
                                    <input type="text" placeholder="Field Name" value="message">
                                    <button class="btn btn-danger btn-small" onclick="removeField(this)">Remove</button>
                                </div>
                            </div>
                            <button class="btn btn-secondary btn-small" onclick="addField('cf-fields')">Add Field</button>
                        </div>

                        <div class="advanced-options">
                            <h4>Advanced Options</h4>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="cf-validation"> Enable Client-side Validation
                                </label>
                            </div>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="cf-responsive" checked> Responsive Design
                                </label>
                            </div>
                            <div class="form-group">
                                <label>Color Scheme</label>
                                <select id="cf-theme">
                                    <option value="blue">Blue</option>
                                    <option value="green">Green</option>
                                    <option value="purple">Purple</option>
                                    <option value="dark">Dark</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Custom Template Builder -->
                <div id="custom" class="template-builder template-hidden">
                    <div class="builder-section">
                        <h2 class="section-title">‚ö° Custom Template Builder</h2>
                        
                        <div class="form-group">
                            <label>Template Name</label>
                            <input type="text" id="custom-name" placeholder="My Custom Template">
                        </div>

                        <div class="form-group">
                            <label>Template Type</label>
                            <select id="custom-type">
                                <option value="html">HTML Document</option>
                                <option value="form">Form Template</option>
                                <option value="report">Report Template</option>
                                <option value="email">Email Template</option>
                                <option value="component">Reusable Component</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Custom HTML Structure</label>
                            <textarea id="custom-html" rows="10" placeholder="Enter your custom HTML...">
<div class="container">
    <h1>{{title}}</h1>
    <p>{{content}}</p>
</div>
                            </textarea>
                        </div>

                        <div class="form-group">
                            <label>Template Variables (one per line)</label>
                            <textarea id="custom-variables" placeholder="title=Default Title&#10;content=Default content&#10;author=Author Name">title=My Custom Template
content=This is a custom template with variables
author=Template Builder</textarea>
                        </div>

                        <div class="form-group">
                            <label>Custom CSS</label>
                            <textarea id="custom-css" rows="6" placeholder="Enter custom CSS...">
.container {
    max-width: 800px;
    margin: 0 auto;
    padding: 20px;
}
                            </textarea>
                        </div>
                    </div>
                </div>

                <!-- Add other template builders here (survey, invoice, etc.) -->
                <div id="survey" class="template-builder template-hidden">
                    <div class="builder-section">
                        <h2 class="section-title">üìä Survey Template Builder</h2>
                        <div class="form-group">
                            <label>Survey Title</label>
                            <input type="text" id="survey-title" value="Customer Satisfaction Survey">
                        </div>
                        <div class="form-group">
                            <label>Survey Instructions</label>
                            <textarea id="survey-instructions">Please take a few minutes to complete this survey. Your feedback is valuable to us.</textarea>
                        </div>
                        <!-- Add more survey-specific fields -->
                    </div>
                </div>

                <!-- Preview Section -->
                <div class="preview-section">
                    <div class="preview-header">
                        <h3>üëÅÔ∏è Live Preview</h3>
                        <button class="btn btn-primary" onclick="updatePreview()">Refresh Preview</button>
                    </div>
                    <div class="preview-content">
                        <iframe id="preview-frame" style="width: 100%; height: 350px; border: none;"></iframe>
                    </div>
                </div>

                <!-- Export Section -->
                <div class="export-section">
                    <h3 class="section-title">üì¶ Export Template</h3>
                    
                    <div class="export-options">
                        <div class="export-option" onclick="exportTemplate('html')">
                            <div class="export-icon">üåê</div>
                            <div><strong>HTML File</strong></div>
                            <div>Standalone HTML</div>
                        </div>
                        
                        <div class="export-option" onclick="exportTemplate('json')">
                            <div class="export-icon">üìã</div>
                            <div><strong>JSON Config</strong></div>
                            <div>Configuration file</div>
                        </div>
                        
                        <div class="export-option" onclick="exportTemplate('wordpress')">
                            <div class="export-icon">üìù</div>
                            <div><strong>WordPress</strong></div>
                            <div>Plugin ready</div>
                        </div>
                        
                        <div class="export-option" onclick="exportTemplate('react')">
                            <div class="export-icon">‚öõÔ∏è</div>
                            <div><strong>React Component</strong></div>
                            <div>JSX component</div>
                        </div>
                        
                        <div class="export-option" onclick="exportTemplate('php')">
                            <div class="export-icon">üêò</div>
                            <div><strong>PHP Template</strong></div>
                            <div>Server-side ready</div>
                        </div>
                        
                        <div class="export-option" onclick="exportTemplate('email')">
                            <div class="export-icon">üìß</div>
                            <div><strong>Email HTML</strong></div>
                            <div>Email client ready</div>
                        </div>
                    </div>

                    <div class="code-preview" id="export-preview">
                        Select an export format to see the generated code...
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentTemplate = 'contact-form';

        // Template switching
        document.querySelectorAll('.template-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // Update active button
                document.querySelectorAll('.template-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Hide all template builders
                document.querySelectorAll('.template-builder').forEach(builder => {
                    builder.classList.add('template-hidden');
                });
                
                // Show selected template builder
                currentTemplate = btn.dataset.template;
                const builder = document.getElementById(currentTemplate);
                if (builder) {
                    builder.classList.remove('template-hidden');
                }
                
                // Update preview
                updatePreview();
            });
        });

        function addField(containerId) {
            const container = document.getElementById(containerId);
            const fieldItem = document.createElement('div');
            fieldItem.className = 'field-item';
            fieldItem.innerHTML = `
                <input type="text" placeholder="Field Label" value="New Field">
                <select class="field-type-selector">
                    <option value="text">Text</option>
                    <option value="email">Email</option>
                    <option value="tel">Phone</option>
                    <option value="textarea">Textarea</option>
                    <option value="select">Dropdown</option>
                    <option value="checkbox">Checkbox</option>
                    <option value="radio">Radio</option>
                </select>
                <input type="text" placeholder="Field Name" value="newfield">
                <button class="btn btn-danger btn-small" onclick="removeField(this)">Remove</button>
            `;
            container.insertBefore(fieldItem, container.lastElementChild);
        }

        function removeField(button) {
            button.parentElement.remove();
        }

        function updatePreview() {
            const generator = getTemplateGenerator(currentTemplate);
            if (generator) {
                const html = generator();
                const iframe = document.getElementById('preview-frame');
                iframe.srcdoc = html;
            }
        }

        function getTemplateGenerator(templateType) {
            const generators = {
                'contact-form': generateContactForm,
                'custom': generateCustomTemplate,
                'survey': generateSurveyTemplate,
                'invoice': generateInvoiceTemplate,
                'landing': generateLandingPage
            };
            
            return generators[templateType] || generateContactForm;
        }

        function generateContactForm() {
            const title = document.getElementById('cf-title').value || 'Contact Us';
            const description = document.getElementById('cf-description').value || '';
            const action = document.getElementById('cf-action').value || '#';
            const theme = document.getElementById('cf-theme').value || 'blue';
            const responsive = document.getElementById('cf-responsive').checked;
            const validation = document.getElementById('cf-validation').checked;

            const fields = Array.from(document.querySelectorAll('#cf-fields .field-item')).map(item => {
                const inputs = item.querySelectorAll('input');
                const select = item.querySelector('select');
                return {
                    label: inputs[0].value,
                    type: select.value,
                    name: inputs[1].value
                };
            });

            const themes = {
                blue: '#667eea',
                green: '#28a745', 
                purple: '#6f42c1',
                dark: '#343a40'
            };

            const fieldHTML = fields.map(field => {
                let fieldElement;
                switch(field.type) {
                    case 'textarea':
                        fieldElement = `<textarea name="${field.name}" id="${field.name}" rows="4" ${validation ? 'required' : ''}></textarea>`;
                        break;
                    case 'select':
                        fieldElement = `<select name="${field.name}" id="${field.name}" ${validation ? 'required' : ''}>
                            <option value="">Please select...</option>
                            <option value="option1">Option 1</option>
                            <option value="option2">Option 2</option>
                        </select>`;
                        break;
                    case 'checkbox':
                        fieldElement = `<input type="checkbox" name="${field.name}" id="${field.name}" value="yes">`;
                        break;
                    case 'radio':
                        fieldElement = `
                            <input type="radio" name="${field.name}" id="${field.name}1" value="option1"> Option 1<br>
                            <input type="radio" name="${field.name}" id="${field.name}2" value="option2"> Option 2
                        `;
                        break;
                    default:
                        fieldElement = `<input type="${field.type}" name="${field.name}" id="${field.name}" ${validation ? 'required' : ''}>`;
                }

                return `
                    <div class="form-group">
                        <label for="${field.name}">${field.label}</label>
                        ${fieldElement}
                    </div>
                `;
            }).join('');

            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .form-container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: ${themes[theme]};
            margin-bottom: 10px;
            text-align: center;
        }
        .description {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .form-group {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: ${themes[theme]};
        }
        .submit-btn {
            background: ${themes[theme]};
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }
        .submit-btn:hover {
            background: ${themes[theme]}dd;
            transform: translateY(-2px);
        }
        ${responsive ? `
        @media (max-width: 768px) {
            .form-container { padding: 20px; margin: 10px; }
        }` : ''}
    </style>
</head>
<body>
    <div class="form-container">
        <h1>${title}</h1>
        ${description ? `<p class="description">${description}</p>` : ''}
        
        <form action="${action}" method="POST" ${validation ? 'novalidate' : ''}>
            ${fieldHTML}
            
            <button type="submit" class="submit-btn">Submit</button>
        </form>
    </div>

    ${validation ? `
    <script>
        document.querySelector('form').addEventListener('submit', function(e) {
            const inputs = this.querySelectorAll('input[required], textarea[required], select[required]');
            let valid = true;
            
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.style.borderColor = '#dc3545';
                    valid = false;
                } else {
                    input.style.borderColor = '#e9ecef';
                }
            });
            
            if (!valid) {
                e.preventDefault();
                alert('Please fill in all required fields.');
            }
        });
    </script>` : ''}
</body>
</html>`;
        }

        function generateCustomTemplate() {
            const name = document.getElementById('custom-name').value || 'Custom Template';
            const html = document.getElementById('custom-html').value || '<h1>Custom Template</h1>';
            const css = document.getElementById('custom-css').value || '';
            const variablesText = document.getElementById('custom-variables').value || '';
            
            // Parse variables
            const variables = {};
            variablesText.split('\n').forEach(line => {
                const [key, value] = line.split('=');
                if (key && value) {
                    variables[key.trim()] = value.trim();
                }
            });
            
            // Replace variables in HTML
            let processedHTML = html;
            Object.keys(variables).forEach(key => {
                const regex = new RegExp(`{{${key}}}`, 'g');
                processedHTML = processedHTML.replace(regex, variables[key]);
            });

            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${name}</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        ${css}
    </style>
</head>
<body>
    ${processedHTML}
</body>
</html>`;
        }

        function generateSurveyTemplate() {
            const title = document.getElementById('survey-title').value || 'Survey';
            const instructions = document.getElementById('survey-instructions').value || '';
            
            return `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${title}</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .question { margin-bottom: 25px; padding: 20px; background: #f9f9f9; border-radius: 8px; }
        .question h3 { margin-top: 0; color: #333; }
        input[type="radio"], input[type="checkbox"] { margin-right: 8px; }
        .submit-btn { background: #007bff; color: white; border: none; padding: 12px 24px; border-radius: 5px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>${title}</h1>
    <p>${instructions}</p>
    
    <form method="POST">
        <div class="question">
            <h3>1. How satisfied are you with our service?</h3>
            <label><input type="radio" name="satisfaction" value="very-satisfied"> Very Satisfied</label><br>
            <label><input type="radio" name="satisfaction" value="satisfied"> Satisfied</label><br>
            <label><input type="radio" name="satisfaction" value="neutral"> Neutral</label><br>
            <label><input type="radio" name="satisfaction" value="dissatisfied"> Dissatisfied</label><br>
            <label><input type="radio" name="satisfaction" value="very-dissatisfied"> Very Dissatisfied</label>
        </div>
        
        <div class="question">
            <h3>2. Additional Comments</h3>
            <textarea name="comments" rows="4" style="width: 100%; padding: 10px;"></textarea>
        </div>
        
        <button type="submit" class="submit-btn">Submit Survey</button>
    </form>
</body>
</html>`;
        }

        function exportTemplate(format) {
            const generator = getTemplateGenerator(currentTemplate);
            if (!generator) return;

            const baseHTML = generator();
            let exportContent = '';

            switch(format) {
                case 'html':
                    exportContent = baseHTML;
                    downloadFile(`${currentTemplate}-template.html`, exportContent);
                    break;
                    
                case 'json':
                    const config = extractTemplateConfig();
                    exportContent = JSON.stringify(config, null, 2);
                    downloadFile(`${currentTemplate}-config.json`, exportContent);
                    break;
                    
                case 'wordpress':
                    exportContent = generateWordPressPlugin(baseHTML);
                    downloadFile(`${currentTemplate}-wordpress-plugin.php`, exportContent);
                    break;
                    
                case 'react':
                    exportContent = generateReactComponent(baseHTML);
                    downloadFile(`${currentTemplate}-component.jsx`, exportContent);
                    break;
                    
                case 'php':
                    exportContent = generatePHPTemplate(baseHTML);
                    downloadFile(`${currentTemplate}-template.php`, exportContent);
                    break;
                    
                case 'email':
                    exportContent = generateEmailHTML(baseHTML);
                    downloadFile(`${currentTemplate}-email.html`, exportContent);
                    break;
            }

            document.getElementById('export-preview').textContent = exportContent;
        }

        function extractTemplateConfig() {
            // Extract current template configuration
            return {
                template_type: currentTemplate,
                created: new Date().toISOString(),
                version: "1.0.0",
                settings: {
                    // Template-specific settings would be extracted here
                }
            };
        }

        function generateWordPressPlugin(html) {
            return `<?php
/**
 * Plugin Name: ${currentTemplate.replace('-', ' ').toUpperCase()} Template
 * Description: Generated template plugin
 * Version: 1.0.0
 */

function ${currentTemplate.replace('-', '_')}_shortcode($atts) {
    $html = '${html.replace(/'/g, "\\'")}';
    return $html;
}
add_shortcode('${currentTemplate.replace('-', '_')}', '${currentTemplate.replace('-', '_')}_shortcode');
?>`;
        }

        function generateReactComponent(html) {
            const componentName = currentTemplate.split('-').map(word => 
                word.charAt(0).toUpperCase() + word.slice(1)
            ).join('');

            return `import React from 'react';

const ${componentName} = () => {
    return (
        <div dangerouslySetInnerHTML={{
            __html: \`${html.replace(/`/g, '\\`')}\`
        }} />
    );
};

export default ${componentName};`;
        }

        function generatePHPTemplate(html) {
            return `<?php
/**
 * ${currentTemplate.replace('-', ' ').toUpperCase()} Template
 * Generated by Offline Template Builder
 */

function render_${currentTemplate.replace('-', '_')}_template($data = []) {
    $html = '${html.replace(/'/g, "\\'")}';
    
    // Replace variables if provided
    foreach($data as $key => $value) {
        $html = str_replace('{{' . $key . '}}', $value, $html);
    }
    
    return $html;
}
?>`;
        }

        function generateEmailHTML(html) {
            // Convert to email-compatible HTML
            return html.replace(/<style>(.*?)<\/style>/s, (match, styles) => {
                // Basic inline styling for email compatibility
                return `<style>
                    /* Email-safe styles */
                    body { margin: 0; padding: 0; background-color: #f4f4f4; }
                    table { border-collapse: collapse; }
                    .email-container { max-width: 600px; margin: 0 auto; background: white; }
                    ${styles}
                </style>`;
            });
        }

        function downloadFile(filename, content) {
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        // Initialize
        updatePreview();

        // Auto-update preview when form values change
        document.addEventListener('input', debounce(updatePreview, 500));

        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }
    </script>
</body>
</html>